XT.statistics=function(){+function(e){"use strict";function t(t){return this.each(function(){var o=e(this),i=o.data("drawring"),a=e.extend({},n.defaults,o.data(),"object"==typeof t&&t);o.data("ring",i=new n(this,a))})}var n=function(t,n){this.$element=e(t),this.options=n,this.init()};n.defaults={maxWidth:160,maxHeight:160,outerRadius:80,innerRadius:60,ringWidth:20,duration:1e3,colors:["#ff8463","#798996"],textColor:"#17becf"},n.prototype.init=function(){this.drawAnimatedRingChart(this.options)},n.prototype.checkEndAll=function(e,t){var n=0;e.each(function(){++n}).each("end",function(){--n||t.apply(this,arguments)})},n.prototype.drawAnimatedRingChart=function(){function e(e){var t={startAngle:0,endAngle:0},n=d3.interpolate(t,e);return function(e){return o(n(e))}}var t=this,n=d3.layout.pie().value(function(e){return e.count}),o=d3.svg.arc();o.outerRadius(t.options.outerRadius).innerRadius(t.options.innerRadius),d3.select(t.options.el).selectAll("g").remove();var i=(d3.select(t.options.el).attr({width:t.options.maxWidth,height:t.options.maxHeight}).append("text").attr({"text-anchor":"middle",color:"#eee","font-weight":700,"font-size":30}).attr("dy","55%").attr("dx","50%").attr("fill",t.options.textColor).text(function(){return(100*t.options.data[0].count/(t.options.data[0].count+t.options.data[1].count)).toFixed(1)+"%"}),d3.select(t.options.el).selectAll("g.arc").data(n(t.options.data)).enter().append("g").attr({class:"arc",transform:"translate("+t.options.outerRadius+", "+t.options.outerRadius+")"}));i.append("path").attr({fill:function(e,n){return console.log(t.options.colors[n]),t.options.colors[n]}}).transition().duration(t.options.duration).attrTween("d",e).call(t.checkEndAll,function(){i.append("text").attr({"text-anchor":"middle",transform:function(e){return"translate("+o.centroid(e)+")"}})})};e.fn.DrawRing;e.fn.DrawRing=t,e.fn.DrawRing.Constructor=n}(jQuery);var e=function(){function e(e,t){var n={service:"",data:{Page:{pageNo:"1",pageSize:"-1"}}},o=$.extend(!0,n,e),i=JSON.stringify(o),a="pdata="+i;return t=t||0,$.ajax({url:o.service,type:"get",data:a,async:t,dataType:"json",beforeSend:function(){console.log("beforeSend")},success:function(e){}})}var t=new Date,n=function(){this.listeners={}};n.prototype={constructor:this,addEvent:function(e,t){return"string"==typeof e&&"function"==typeof t&&("undefined"==typeof this.listeners[e]?this.listeners[e]=[t]:this.listeners[e].push(t)),this},addEvents:function(e){e="object"==typeof e?e:{};var t;for(t in e)t&&"function"==typeof e[t]&&this.addEvent(t,e[t]);return this},fireEvent:function(e){if(e&&this.listeners[e])for(var t={type:e,target:this},n=this.listeners[e].length,o=0;o<n;o++)this.listeners[e][o].call(this,t);return this},fireEvents:function(e){if(e instanceof Array)for(var t=0,n=e.length;t<n;t++)this.fireEvent(e[t]);return this},removeEvent:function(e,t){var n=this.listeners[e];if(n instanceof Array)if("function"==typeof t){for(var o=0,i=n.length;o<i;o++)if(n[o]===t){n.splice(o,1);break}}else if(t instanceof Array)for(var a=0,r=t.length;a<r;a+=1)this.removeEvent(e,t[r]);else delete this.listeners[e];return this},removeEvents:function(e){if(e instanceof Array)for(var t=0,n=e.length;t<n;t++)this.removeEvent(e[t]);else if("object"==typeof e)for(var o in e)this.removeEvent(o,e[o]);return this}};var o=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate();$("#reservation").daterangepicker({startDate:"2016/9/02",endDate:o}),$("#reservation").on("hide.daterangepicker",function(e,t){$("#reservation").val().replace(/[\/\s+]/g,"").split("-")});var i=[{dept:"A",count:10},{dept:"B",count:2}];$(".animated-ring").DrawRing({el:".animated-ring svg",data:i,colors:["#f88169","#ddd"],textColor:"#f88169"}),$(".animated-ring1").DrawRing({el:".animated-ring1 svg",data:i,colors:["#2cd6b0","#ddd"],textColor:"#f88169"}),$(".animated-ring2").DrawRing({el:".animated-ring2 svg",data:i,colors:["#69bb61","#ddd"],textColor:"#f88169"});var a="http://localhost:3005/scripts/json/treeroot.json",r="http://localhost:3005/scripts/json/treechild.json",s={};s.flag=0,s.id="",s.selectedItem=null,s.init=function(t){var n,o=$(t);$(document).off("click.js-icon-edit").on("click.js-icon-edit",".js-icon-edit",function(){$(".contentedit").prop("contenteditable",!0).addClass("contentedit-style"),$(document).off("click.js-icon-undo").on("click.js-icon-undo",".js-icon-undo",function(){s.populateText([{text:"撤销操作",field:"组织等级"},{group:"",field:"组织等级"},{text3:"",field:"组织等级"},{text4:"",field:"组织等级"},{text5:"",field:"组织等级"},{value:"",field:"组织角色"}],!0)})}),$(document).off("click.js-icon-save").on("click",".js-icon-save",function(){$(".contentedit").prop("contenteditable",!1).removeClass("contentedit-style"),console.log(s.getTemplateValue(".main-content span.contentedit")),console.log(s.flag),1===s.flag?o.tree("appendNode",n,$(n).data().type):2===s.flag}),$(document).off("click.js-icon-trash").on("click.js-icon-trash",".js-icon-trash",function(){o.tree("deleteNode",s.selectedItem)}),$(document).on("mouseover mouseout",".js-tree-branch-header",function(){$(this).find("span.js-icon-plus").eq(0).toggle()}),o.off("beforedisclosedFolder.tree.js").on("beforedisclosedFolder.tree.js",function(e,t){alert("展开前获取ID1"),s.id=t.attr.id,console.log(t)}),o.off("appendbefore.tree.js").on("appendbefore.tree.js",function(e,t){s.flag=1,s.selectedItem=$(t),console.log(s.selectedItem),n=t,s.populateText([{text:"",field:"组织等级"},{group:"",field:"组织等级"},{text3:"",field:"组织等级"},{text4:"",field:"组织等级"},{text5:"",field:"组织等级"},{value:"",field:"组织角色"}],!0)}),o.off("selected.tree.js").on("selected.tree.js",function(e,t){s.flag=2,s.selectedItem=t.ele,console.log(s.selectedItem);var n=t.selected[0].attr;s.populateText([{text:n.text,field:"组织等级"},{group:"",field:"组织等级"},{text3:"",field:"组织等级"},{text4:"",field:"组织等级"},{text5:"",field:"组织等级"},{value:"",field:"组织角色"}],!1)}),o.tree({dataSource:function(t,n){var o;if("1"===s.id){var o={operatorID:s.selectedItem,operateName:"2",groupShortName:"金鑫",groupName:"赵三",city:"日本东京"};e({service:r,data:o},0).done(function(e){alert("进入增加，返回了数据"),n({data:e})})}else if("2"===s.id){var o={operatorID:s.selectedItem,operateName:"2",groupShortName:"金鑫",groupName:"赵三",city:"日本东京"};e({service:r,data:o},0).done(function(e){alert("进入增加，返回了数据"),n({data:e})})}else if(!s.id){var o={operatorID:"1",operateName:"2",groupShortName:"金鑫",groupName:"赵三",city:"日本东京"};e({service:a,data:o},0).done(function(e){n({data:e})})}},multiSelect:!1,cacheItems:!0,folderSelect:!0,add:!0}).on("loaded.tree.js",function(e){console.log("Loaded")}).on("updated.tree.js",function(e,t){console.log("Updated Event: ",t),console.log(o.tree("selectedItems"))}).on("closed.tree.js",function(e,t){console.log("Close Event: ",t)})},s.populateText=function(e,t){var n=$(".main-content");console.time("计时器"),n.html(""),e.forEach(function(e,t){var o,i,a=$('<div class="m-15"></div>');for(var r in e)"field"===r?o=$("<span>"+e[r]+"：</span >"):i=$('<span class="contentedit  " data-'+r+"="+e[r]+">"+e[r]+"</span>");n.append(a.append(o).append(i))}),n.append('<div style="float:right"><span class="js-icon-edit" title="编辑"></span><span class="js-icon-trash" title="删除"></span><span class="js-icon-undo" title="撤销"></span><span class="js-icon-save " title="保存"></span></div>'),t&&$(".contentedit").prop("contenteditable",!0).addClass("contentedit-style"),console.timeEnd("计时器")},s.getTemplateValue=function(e){var t,n,o=[];return t=$(e),n=t.length,t.each(function(e,t){var n={};for(var i in t.dataset)n[i]=t.textContent;o.push(n)}),o},s.modifyNodeDeepth=function(e,t){var n=$("li[deepth="+e+"]").clone(),o=$("li[deepth="+t+"]");$("li[deepth="+e+"]").remove(),o.append(n)},s.init("#myTree")};return{init:e}}(jQuery);
//# sourceMappingURL=statistics.js.map
